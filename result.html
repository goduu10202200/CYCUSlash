<!-- 
                            _ooOoo_
                           o8888888o
                           88" . "88
                           (| -_- |)
                            O\ = /O
                        ____/`---'\____
                      .   ' \\| |// `.
                       / \\||| : |||// \
                     / _||||| -:- |||||- \
                       | | \\\ - /// | |
                     | \_| ''\---/'' | |
                      \ .-\__ `-` ___/-. /
                   ___`. .' /--.--\ `. . __
                ."" '< `.___\_<|>_/___.' >'"".
               | | : `- \`.;`\ _ /`;.`/ - ` : | |
                 \ \ `-. \_ __\ /__ _/ .-` / /
         ======`-.____`-.___\_____/___.-`____.-'======
                            `=---='

         .............................................
                  佛祖鎮樓                  沒有BUG
          佛曰:
                  程序人員寫程序，又拿程序換酒錢。
                  酒醒只在網上坐，酒醉還來網下眠；
                  酒醉酒醒日復日，網上網下年復年。
                  但願老死電腦間，不願鞠躬老闆前；
                  奔馳寶馬貴者趣，公交自行程序員。
                  別人笑我忒瘋癲，我笑自己命太賤；
                  不見滿街漂亮妹，哪個歸得程序員？
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>result</title>
    <script src="js/vue.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/result.css">
</head>
<script>
    function getArgs() {
        var args = new Object();
        var query = location.search.substring(1);
        var pairs = query.split("&");
        for (var i = 0; i < pairs.length; i++) {
            var pos = pairs[i].indexOf("=");
            if (pos == -1) continue;
            var argname = pairs[i].substring(0, pos);
            var value = pairs[i].substring(pos + 1);
            args[argname] = decodeURIComponent(value);
        }
        return args;
    }
    var args = getArgs();
    //document.getElementById("img_role").attributes("src") = "images/" + args.role + ".png";
</script>

<body>
    <div id="display">
        <div class="pk_div" v-if="score>=60">
            <div class="result_div_win">
                <img id="result_role" src="images/bear_fail.png" />
                <img id="result_floor" src="images/floor.png" />
            </div>
            <img id="bear_blood" src="images/bear_hp0.png" />
            <img id="my_blood" src="images/pika_hp100.png" />
        </div>
        <div class="pk_div" v-if="score <60 ">
            <div class="result_div">
                <img v-if=" role=='miao' " id="result_role" src="images/miao_fail.png" />
                <img v-if=" role=='pika' " id="result_role" src="images/pika_fail.png" />
                <img id="result_floor" src="images/floor.png" />
            </div>
            <!-- <img id="bear_blood" src="images/miao_hp0.png" /> -->
            <img v-if=" role=='miao' " id="my_blood" src="images/miao_hp0.png" />
            <img v-if=" role=='pika' " id="my_blood" src="images/pika_hp0.png" />
        </div>
        <section>
            <div class="result">
                <div class="content">
                    <span v-if=" score < 60">{{message_role}}，</span>
                    {{message_student}}，{{message_score}}
                    <br>
                    <br>
                    {{message}}
                </div>
            </div>
        </section>
    </div>

</body>
<script src="js/cycuslash.js"></script>
<script>
    var strUrl = location.search;
    var getPara, ParaVal;
    var aryPara = [];

    window.onload = function () {

        vm.display();
    }
    var vm = new Vue({
        el: '#display',
        data: {
            role: "",
            score: "",
            message: "",
            id_student: "",
            message_role: "",
            message_student: "",
            message_score: "",
        },
        methods: {
            display: function () {
                var getjson = JSON.parse(getURL());
                this.role = getjson.role;
                this.score = getjson.score;
                this.id_student = getjson.id_student;
                this.message_student = "學號：" + this.id_student + "同學";

                if (this.role == "pika") {
                    this.message_role = "痞卡丘已失去戰鬥能力";
                } else {
                    this.message_role = "喵蛙種子已失去戰鬥能力"
                }
                switch (this.score) {
                    case "0":
                        this.message_score = "加油！你的斜槓指數為 0";
                        this.message = " 建議您可以去 10/31 大草坪的學程博覽會多多了解學程。參加闖關後，可抽 APPLE WATCH 哦！"
                        break;
                    case "50":
                        this.message_score = "太可惜了！你的斜槓分數為 50";
                        this.message = "就差一點，可以再加油！憑此畫面去 10/31 大草坪的學程博覽會多多了解學程課程參加闖關後，可抽 APPLE WATCH 喔！"
                        break;
                    case "60":
                        this.message_score = "再加油喔！你的斜槓分數為 60";
                        this.message = "同學太優秀了！憑此畫面去 10/31 大草坪的學程博覽會多多了解學程課程參加闖關後，可抽 APPLE WATCH 喔！"
                        break;
                    case "70":
                        this.message_score = "真可惜～差一點！你的斜槓分數為 70";
                        this.message = "同學太優秀了！憑此畫面去 10/31 大草坪的學程博覽會多多了解學程課程參加闖關後，可抽 APPLE WATCH 喔！"
                        break;
                    case "80":
                        this.message_score = "真可惜～差一點！你的斜槓分數為 80";
                        this.message = "同學太優秀了！憑此畫面去 10/31 大草坪的學程博覽會多多了解學程課程參加闖關後，可抽 APPLE WATCH 喔！"
                        break;
                    case "90":
                        this.message_score = "再接再厲！你的斜槓分數為 90";
                        this.message = "同學太優秀了！憑此畫面去 10/31 大草坪的學程博覽會多多了解學程課程參加闖關後，可抽 APPLE WATCH 喔！"
                        break;
                    case "100":
                        this.message_score = "你的斜槓分數為 100";
                        this.message = " 同學太優秀了！憑此畫面去 10/31 大草坪的學程博覽會多多了解學程課程參加闖關後，可抽 APPLE WATCH 喔！"
                        break;
                    default: this.message = ""
                }
            }
        }
    })

    function getURL() {
        id_student = "";
        if (strUrl.indexOf("?") != -1) {
            var getSearch = strUrl.split("?");
            getPara = getSearch[1].split("&");
            for (i = 0; i < getPara.length; i++) {
                ParaVal = getPara[i].split("=");
                aryPara.push(ParaVal[0]);
                aryPara[ParaVal[0]] = ParaVal[1];
            }
        }
        pos = {
            role: aryPara['role'],
            score: aryPara['score'],
            id_student: aryPara['id_student']
        };
        return JSON.stringify(pos);
    }

</script>

</html>